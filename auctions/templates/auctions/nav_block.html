{% comment %}

context for views:
    bages class with bages.category properties.
    categories: set of Category() to filter in navbar.

{% endcomment %}

<nav class="navbar navbar-light sticky-top navbar-expand-md mb-3" style="background-color: #e3f2fd;">
  <a class="navbar-brand" href="{% url 'auctions:index' %}">Auctions</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-between" id="navbarNavDropdown">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link active" href="{% url 'auctions:index' %}">Active Listings <span class="sr-only">(current)</span></a>
      </li>
      {% if user.is_authenticated %}
      <li class="nav-item">
        <a class="nav-link active" href="{% url 'auctions:create_listing' %}">Create listing</a>
      </li>
      <li class="nav-item">
        {% if not user.wishlist_count %}
          <a class="nav-link active" href="{% url 'auctions:wishlist' %}">Wishlist </a>
        {% else %}
          <a class="nav-link active" href="{% url 'auctions:wishlist' %}">Watchlist <span class="badge badge-primary">{{user.wishlist_count}}</span></a>
        {% endif %}
      </li>
      {% endif %}
      {% if categories %}
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle active" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Category filter <span class="badge badge-secondary">{{bages.category}}</span>
        </a>
        {% block category_filter %}
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          {% for category in categories %}
              {% if request.path != '/' %}
              <a class="dropdown-item" href="{{ request.path }}?f={{ category.name }}">{{ category|capfirst }}</a>
              {% else %}
              <a class="dropdown-item" href="index?f={{ category.name }}">{{ category|capfirst }}</a>
              {% endif %}
          {% endfor %}
        </div>

        {% endblock %}
      </li>
      {% endif %}
      <li class="nav-item">
        <a class="nav-link active" href="{% url 'auctions:categories' %}">Categories</a>
      </li>
    </ul>
    <div class="navbar-nav">
        {% if user.is_authenticated %}
        <span class="navbar-text">
            Signed in as <strong>{{ user.username }}</strong>
        </span>
        <span class="nav-item">
            {% if user.notifications_count %}
            <a class="nav-link active" href="{% url 'auctions:notifications' %}">Notification<span class="badge badge-warning">{{user.notifications_count}}</span></a>
            {% else %}
            <a class="nav-link active" href="{% url 'auctions:notifications' %}">Notification</a>
            {% endif %}
        </span>
        <span class="nav-item">
             <a class="nav-link active" href="{% url 'auctions:logout' %}">Log out</a>
        </span>
        {% else %}
        <span class="nav-item">
             <a class="nav-link active" href="{% url 'auctions:login' %}">Log In</a>
        </span>
        <span class="nav-item">
             <a class="nav-link active" href="{% url 'auctions:register' %}">Register</a>
        </span>
        {% endif %}
    </div>
  </div>
</nav>